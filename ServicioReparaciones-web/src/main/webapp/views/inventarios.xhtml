<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <h:form id="fadd">
            <p:panel>
                <h:panelGrid columns="3" cellpadding="5">
                    <p:outputLabel for="bodega" value="Bodega:"/>
                    <p:selectOneMenu id="bodega" required="true" value="#{inventarioBean.bodega.codigo}">
                        <f:selectItem itemLabel="Seleccionar" itemValue="" noSelectionOption="true"/>
                        <f:selectItems value="#{bodegaBean.bodegas}" var="bod"
                                       itemLabel="#{bod.nombre}" itemValue="#{bod.codigo}"/>
                    </p:selectOneMenu>
                    <p:message for="bodega" display="tooltip" severity="error"/>
                </h:panelGrid>
                <h:panelGrid cellpadding="5">
                    <p:outputLabel value="Seleccione un articulo:"/>
                    <p:dataTable  id="dtart" var="art" value="#{articuloBean.articulos}"
                                  filteredValue="#{articuloBean.filtered}"
                                  selectionMode="single" selection="#{inventarioBean.articulo}"
                                  rowKey="#{art.codigo}" rows="5" tableStyle="width: auto"
                                  paginator="true" paginatorPosition="bottom"
                                  reflow="true">
                        <p:ajax event="rowSelect" listener="#{inventarioBean.onRowSelect}"/>
                        <f:facet name="header">
                            <h:outputText value="ARTICULOS"/>
                        </f:facet>
                        <p:column headerText="Fecha" style="text-align: center;font-size: 70%" filterMatchMode="contains">
                            <h:outputText value="#{art.lastChange}">
                                <f:convertDateTime pattern="dd/MM/yyy HH:mm:ss a" timeZone="#{calendarioBean.calenadario.timeZone}"/>
                            </h:outputText>
                        </p:column>
                        <p:column filterBy="#{art.nombre}" headerText="Nombre" style="text-align: center;font-size: 70%">
                            <h:outputText value="#{art.nombre} " />
                        </p:column>
                        <p:column headerText="Artefacto" style="text-align: center;font-size: 70%">
                            <h:outputText value="#{art.artefacto} " />
                        </p:column>
                        <p:column headerText="Marca" style="text-align: center;font-size: 70%">
                            <h:outputText value="#{art.marca} " />
                        </p:column>
                        <p:column filterBy="#{art.modelo}" headerText="Modelo" style="text-align: center;font-size: 70%" filterMatchMode="contains">
                            <h:outputText value="#{art.modelo} " />
                        </p:column>
                        <p:column filterBy="#{art.code}" headerText="Código" style="text-align: center;font-size: 70%" filterMatchMode="contains">
                            <h:outputText value="#{art.code} " />
                        </p:column>
                        <p:column filterBy="#{art.numeroParte}" headerText="Numéro Parte" style="text-align: center;font-size: 70%" filterMatchMode="contains">
                            <h:outputText value="#{art.numeroParte} " />
                        </p:column>
                        <p:column headerText="Unidad/Medida" style="text-align: center;font-size: 70%">
                            <h:outputText value="#{art.unidadMedicion}" />
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
                <f:facet name="footer">
                    <p:commandButton value="Buscar" update=":fdtinv:dtinv"
                                     actionListener="#{inventarioBean.findInventario(evt)}"/>
                </f:facet>
            </p:panel>
        </h:form>
        <h:form id="fdtinv">
            <p:dataTable id="dtinv" value="#{inventarioBean.invetarios}"
                         var="inv" rowKey="#{inv.codigo}" rows="5" 
                         tableStyle="width: auto"
                         paginatorPosition="bottom" reflow="true">
                <f:facet name="header">
                    <h:outputText value="Inventarios Articulo = Repuesto en bodega"/>
                </f:facet>
                <p:column headerText="Fecha" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.lastChange}">
                        <f:convertDateTime pattern="dd/MM/yyy HH:mm:ss a" timeZone="#{calendarioBean.calenadario.timeZone}"/>
                    </h:outputText>
                </p:column>
                <p:column headerText="Número Factura" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.entrada.numeroFactura}"/>
                </p:column>
                <p:column headerText="Concepto" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.entrada.concepto}"/>
                </p:column>
                <p:column headerText="Cantidad" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.entrada.cantidad}"/>
                </p:column>
                <p:column headerText="Precio Unit." style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.entrada.precioUnit}"/>
                </p:column>
                <p:column headerText="Precio Total" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.entrada.precioTotal}"/>
                </p:column>
                <p:column headerText="Número Factura" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.salida.numeroFactura}"/>
                </p:column>
                <p:column headerText="Concepto" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.salida.concepto}"/>
                </p:column>
                <p:column headerText="Cantidad" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.salida.cantidad}"/>
                </p:column>
                <p:column headerText="Precio Unit." style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.salida.precioUnit}"/>
                </p:column>
                <p:column headerText="Precio Total" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.movimiento.salida.precioTotal}"/>
                </p:column>
                <p:column headerText="Cantidad" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.cantidad}"/>
                </p:column>
                <p:column headerText="Precio Unit." style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.precioUnit}"/>
                </p:column>
                <p:column headerText="Precio Total" style="text-align: center;font-size: 70%">
                    <h:outputText value="#{inv.precioTotal}"/>
                </p:column>
            </p:dataTable>
        </h:form>
    </ui:define>

</ui:composition>
